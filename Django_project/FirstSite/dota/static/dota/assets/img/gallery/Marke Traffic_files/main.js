"use strict";!function(){function e(e,t){t=t||{bubbles:!1,cancelable:!1,detail:void 0};var r=document.createEvent("CustomEvent");return r.initCustomEvent(e,t.bubbles,t.cancelable,t.detail),r}"function"!=typeof window.CustomEvent&&(e.prototype=window.Event.prototype,window.CustomEvent=e)}(),Element.prototype.matches||(Element.prototype.matches=Element.prototype.msMatchesSelector||Element.prototype.webkitMatchesSelector),Element.prototype.closest||(Element.prototype.closest=function(e){var t=this;do{if(t.matches(e))return t}while(null!==(t=t.parentElement||t.parentNode)&&1===t.nodeType);return null});var modalAlert,EventTarget=function(){this.listeners={}};function _typeof(e){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function _slicedToArray(e,t){return _arrayWithHoles(e)||_iterableToArrayLimit(e,t)||_unsupportedIterableToArray(e,t)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _iterableToArrayLimit(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,i=[],a=!0,s=!1;try{for(r=r.call(e);!(a=(n=r.next()).done)&&(i.push(n.value),!t||i.length!==t);a=!0);}catch(e){s=!0,o=e}finally{try{a||null==r.return||r.return()}finally{if(s)throw o}}return i}}function _arrayWithHoles(e){if(Array.isArray(e))return e}function _toConsumableArray(e){return _arrayWithoutHoles(e)||_iterableToArray(e)||_unsupportedIterableToArray(e)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _unsupportedIterableToArray(e,t){if(e){if("string"==typeof e)return _arrayLikeToArray(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Map"===(r="Object"===r&&e.constructor?e.constructor.name:r)||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?_arrayLikeToArray(e,t):void 0}}function _iterableToArray(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}function _arrayWithoutHoles(e){if(Array.isArray(e))return _arrayLikeToArray(e)}function _arrayLikeToArray(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function ownKeys(t,e){var r,n=Object.keys(t);return Object.getOwnPropertySymbols&&(r=Object.getOwnPropertySymbols(t),e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,r)),n}function _objectSpread(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?ownKeys(Object(r),!0).forEach(function(e){_defineProperty(t,e,r[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):ownKeys(Object(r)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))})}return t}function _defineProperty(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function _createClass(e,t,r){return t&&_defineProperties(e.prototype,t),r&&_defineProperties(e,r),e}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&_setPrototypeOf(e,t)}function _createSuper(r){var n=_isNativeReflectConstruct();return function(){var e,t=_getPrototypeOf(r);return _possibleConstructorReturn(this,n?(e=_getPrototypeOf(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments))}}function _possibleConstructorReturn(e,t){if(t&&("object"===_typeof(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return _assertThisInitialized(e)}function _assertThisInitialized(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function _wrapNativeSuper(e){var r="function"==typeof Map?new Map:void 0;return(_wrapNativeSuper=function(e){if(null===e||!_isNativeFunction(e))return e;if("function"!=typeof e)throw new TypeError("Super expression must either be null or a function");if(void 0!==r){if(r.has(e))return r.get(e);r.set(e,t)}function t(){return _construct(e,arguments,_getPrototypeOf(this).constructor)}return t.prototype=Object.create(e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),_setPrototypeOf(t,e)})(e)}function _construct(e,t,r){return(_construct=_isNativeReflectConstruct()?Reflect.construct:function(e,t,r){var n=[null];n.push.apply(n,t);n=new(Function.bind.apply(e,n));return r&&_setPrototypeOf(n,r.prototype),n}).apply(null,arguments)}function _isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}function _isNativeFunction(e){return-1!==Function.toString.call(e).indexOf("[native code]")}function _setPrototypeOf(e,t){return(_setPrototypeOf=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function _getPrototypeOf(e){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}EventTarget.prototype.listeners=null,EventTarget.prototype.addEventListener=function(e,t){e in this.listeners||(this.listeners[e]=[]),this.listeners[e].push(t)},EventTarget.prototype.removeEventListener=function(e,t){if(e in this.listeners)for(var r=this.listeners[e],n=0,o=r.length;n<o;n++)if(r[n]===t)return void r.splice(n,1)},EventTarget.prototype.dispatchEvent=function(e){if(!(e.type in this.listeners))return!0;for(var t=this.listeners[e.type].slice(),r=0,n=t.length;r<n;r++)t[r].call(this,e);return!e.defaultPrevented},String.prototype.includes||(String.prototype.includes=function(e,t){if(e instanceof RegExp)throw TypeError("first argument must not be a RegExp");return-1!==this.indexOf(e,t=void 0===t?0:t)}),Array.prototype.includes||Object.defineProperty(Array.prototype,"includes",{enumerable:!1,value:function(t){return 0<this.filter(function(e){return e==t}).length}}),window.NodeList&&!NodeList.prototype.forEach&&(NodeList.prototype.forEach=function(e,t){t=t||window;for(var r=0;r<this.length;r++)e.call(t,this[r],r,this)});var FormCustomEvents=function(){_inherits(t,_wrapNativeSuper(EventTarget));var e=_createSuper(t);function t(){return _classCallCheck(this,t),e.apply(this,arguments)}return _createClass(t,[{key:"submit",value:function(e){this.dispatchEvent(new CustomEvent("form:buttonClicked",{detail:_objectSpread({},e)}))}},{key:"error",value:function(e){this.dispatchEvent(new CustomEvent("form:error",{detail:e}))}},{key:"success",value:function(e){this.dispatchEvent(new CustomEvent("form:success",{detail:e}))}},{key:"fail",value:function(e){this.dispatchEvent(new CustomEvent("form:fail",{detail:e}))}}]),t}(),customEvents=new FormCustomEvents;$(document).ready(function(){$(".modal-fail__error-ok").on("click",function(e){modalAlert.hide(),e.preventDefault()}),$(".modal-fail").on("click",function(e){$(this).hasClass("redirect-error")&&!$(e.target).closest(".modal-fail__content").length&&modalAlert.hide()}),modalAlert={hide:function(){$("body").removeClass("modal-fail_visible"),$(".modal-fail").removeClass("redirect-error")},show:function(){$("body").hasClass("modal-fail_visible")||$("body").addClass("modal-fail_visible"),$(".modal-fail").addClass("redirect-error")}}});var getStatusFields=function(e,t,r){var n={};return _defineProperty(n,"ERROR_EMAIL_DUPLICATE",function(){r.find(".tooltip_existing").show(),no_redirect_brand||r.find(".js-login-url").attr("href",t),"undefined"!=typeof is_social_auth&&!0===is_social_auth&&$(".js-auth-popup").hasClass("is-open")&&($(".js-auth-popup").removeClass("is-open"),$(".tooltip_existing").show(),no_redirect_brand||$(".js-login-url").attr("href",t))}),_defineProperty(n,"ERROR_MOBILE_INVALID",function(){return r.find(".tooltip_phone_num").show()}),_defineProperty(n,"ERROR_PASSWORD_VALIDATION",function(){return r.find(".tooltip_pw_invalid").text(t).show()}),_defineProperty(n,"ERROR_EMAIL_INVALID",function(){return r.find(".tooltip_user_email").show()}),_defineProperty(n,"ERROR_COUNTRY_BLOCKED",function(){return r.find(".tooltip_country").show()}),_defineProperty(n,"ERROR_FIRST_NAME_INVALID",function(){(r.find('[name="full_name"]')?r.find(".tooltip_full-name-length"):r.find(".tooltip_first_name")).show()}),_defineProperty(n,"ERROR_LAST_NAME_INVALID",function(){(r.find('[name="full_name"]')?r.find(".tooltip_full-name-length"):r.find(".tooltip_last_name")).show()}),n[e]},getPhoneErrorMessage=function(e){var t={};return _defineProperty(t,"INVALID_COUNTRY",phoneErrorInvalidCountry),_defineProperty(t,"NOT_A_NUMBER",phoneErrorIsDigits),_defineProperty(t,"TOO_LONG",phoneErrorTooLong),_defineProperty(t,"TOO_SHORT",phoneErrorTooShort),t[e]||null},showErrors=function(e,t){t=getStatusFields(e.responseJSON?e.responseJSON.errors.type:"",e.responseJSON.errors.message,t);t?t():modalAlert.show()},firePixel=function(r,n){var e,o=new DOMParser;for(e in r)!function(t){if(r.hasOwnProperty(t))try{var e=o.parseFromString(r[t],"text/html").scripts[0].innerText;new Function(e)()}catch(e){window.Sentry&&Sentry.withScope(function(e){e.setExtra("invalidPixel",r[t]),e.setUser({email:n}),Sentry.captureMessage("Firing pixel error","error")}),console.error("Firing pixel error. Invalid Pixel: ".concat(r[t]))}}(e)},createDataError=function(){var o=[];return function(e,t,r){var n;if("clear"===e)o=[];else{if(!e)return n=_toConsumableArray(o),o=[],n;o.push({name:e,value:t,message:r})}return o}},setError=createDataError();!function(u,d,t){var c,e=u("#loader"),p=function(){isRedirectScreenLoader?t.body.classList.add("afs-loader_visible"):e.show()},f=function(){isRedirectScreenLoader?t.body.classList.remove("afs-loader_visible"):e.hide()};function m(e,t){t.find("."+e+"-helper").remove(),t.find("."+e+"-approved").remove(),t.find(".tooltip_"+e).show()}function _(e,t){t.find("."+e).removeClass("error"),t.find("."+e+"-helper").remove(),t.find("."+e+"-approved").remove(),t.find("."+e).after('<div class="approved '+e+'-approved">✔</div>')}function h(e,t){t.find(".tooltip_"+e).hide()}function v(e){return/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(e)}function i(e){return/^[0-9]{1,4}$/.test(e)}function a(e){return/^[0-9]{1,16}$/.test(e)}function s(e,t){t=new libphonenumber.parsePhoneNumberWithError(e,t);return{isValid:!!t.isValid&&t.isValid(),number:t.number?t.number.slice(1):"",nationalNumber:t.nationalNumber||""}}function l(e){return/^([^0-9]*)$/.test(e)}function y(e){return/^([^0-9 ])( [^0-9 ]+)*$/.test(e)}function g(e){return/^((?=.*\d)(?=.*[a-zA-Z]).{8,25})$/g.test(e)&&6<=e.length}function b(e){return/^[^0-9<>[\]{}|\\\/^~%#:;,.$%?_@"=+]*\s[^0-9<>[\]{}|\\\/^~%#:;,.$%?_@"=+]+$/.test(e.trim())}function w(n){var o=[];return setError("clear"),customEvents.submit({text:n.find('[type="submit"]').text().trim(),type:n.find("#uaction").val()}),n.find(".full_name").each(function(e,t){var r=u(t);if(""!==r.val()){if(is_tooltip_message&&h("full_name_require",n),r.val().length<2||!b(r.val()))return o.push(function(){m("full_name",n),r.addClass("error")}),void setError(r.attr("name"),r.val(),"is too short or wrong format");_("full_name",n)}else o.push(function(){is_tooltip_message?(m("full_name_require",n),r.addClass("error")):(r.attr("placeholder",enter_name_txt),r.addClass("error empty-inp")),setError(r.attr("name"),r.val(),"is empty")})}),n.find(".first_name").each(function(e,t){var r=u(t);return""===r.val()?(o.push(function(){is_tooltip_message?(m("first_name_require",n),r.addClass("error")):(r.attr("placeholder",enter_fname_txt),r.addClass("error empty-inp"))}),void setError(r.attr("name"),r.val(),"is empty")):(is_tooltip_message&&h("first_name_require",n),r.val().length<2||!l(r.val())?(o.push(function(){m("first_name",n),r.addClass("error")}),void setError(r.attr("name"),r.val(),"is too short or wrong format")):void _("first_name",n))}),n.find(".last_name").each(function(e,t){var r=u(t);return""===r.val()?(o.push(function(){is_tooltip_message?(m("last_name_require",n),r.addClass("error")):(r.attr("placeholder",enter_lname_txt),r.addClass("error empty-inp"))}),void setError(r.attr("name"),r.val(),"is empty")):(is_tooltip_message&&h("last_name_require",n),r.val().length<2||!l(r.val())?(o.push(function(){m("last_name",n),r.addClass("error")}),void setError(r.attr("name"),r.val(),"is too short or wrong format")):void _("last_name",n))}),n.find(".pw").each(function(e,t){var r=u(t);return""===r.val()?(o.push(function(){is_tooltip_message?(m("pw_required",n),r.addClass("error")):(r.attr("placeholder",enter_pw_txt),r.addClass("error empty-inp"))}),void setError(r.attr("name"),r.val(),"is empty")):(is_tooltip_message&&h("pw_required",n),g(r.val())?void _("pw",n):(o.push(function(){m("pw",n),r.addClass("error");var e=n.find(".pw2");e.attr("disabled","disabled"),e.attr("readonly","readonly")}),void setError(r.attr("name"),r.val(),"is too short or wrong format")))}),n.find(".pw2").each(function(e,t){var r=u(t);return""===r.val()?(o.push(function(){is_tooltip_message?(m("pw2_required",n),r.addClass("error")):(r.attr("placeholder",enter_pw2_txt),r.addClass("error empty-inp"))}),void setError(r.attr("name"),r.val(),"is empty")):(is_tooltip_message&&h("pw2_required",n),r.val()!==n.find(".pw").val()?(o.push(function(){m("pw2",n),r.addClass("error")}),void setError(r.attr("name"),r.val(),"is not match")):void _("pw2",n))}),n.find("#country").each(function(e,t){t=u(t);""===t.val()&&(is_tooltip_message?(m("country_required",n),t.addClass("error")):(t.addClass("error empty-inp"),o.push(function(){})),setError(t.attr("name"),t.val(),"is required"))}),n.find(".currency").each(function(e,t){t=u(t);if(""===t.val())return is_tooltip_message?(m("currency",n),t.addClass("error")):(t.addClass("error empty-inp"),o.push(function(){})),void setError(t.attr("name"),t.val(),"is required");is_tooltip_message&&h("curr",n)}),n.find("#terms-checkbox").each(function(e,t){t=u(t);t.hasClass("checked")||(t.addClass("error"),o.push(function(){m("terms",n)}),setError(t.attr("name"),t.val(),"is not checked"))}),n.find(".country_prefix").each(function(e,t){var r=u(t);if(""===r.val())return o.push(function(){is_tooltip_message?(m("country_prefix_required",n),r.addClass("error")):(r.attr("placeholder",required_txt),r.addClass("error empty-inp"))}),void setError(r.attr("name"),r.val(),"is empty");i(r.val())?(r.val(),_("country_prefix",n)):o.push(function(){m("country_prefix",n)})}),n.find(".user_email").each(function(e,t){var r=u(t);return""===r.val()?(o.push(function(){is_tooltip_message?(m("user_email_required",n),r.addClass("error")):(r.attr("placeholder",enter_email_txt),r.addClass("error empty-inp"))}),void setError(r.attr("name"),r.val(),"is empty")):(is_tooltip_message&&h("user_email_required",n),v(r.val())?void _("user_email",n):(o.push(function(){var e=u(".get_resp_error");0<u(e).length&&u(e).remove(),m("user_email",n),r.addClass("error")}),void setError(r.attr("name"),r.val(),"is wrong format")))}),n.find(".phone_num").each(function(e,t){var r=u(t);if(advanced_phone_validation){if(""===r.val())return n.find(".tooltip_phone_num_error").text(enter_phone_txt),o.push(function(){m("phone_num_error",n),r.addClass("error")}),setError(r.attr("name"),r.val(),"is empty"),!0;if(1===r.val().length)return n.find(".tooltip_phone_num_error").text(phoneErrorTooShort),o.push(function(){m("phone_num_error",n),r.addClass("error")}),setError(r.attr("name"),r.val(),"is to short"),!0;var t=n.find("#country option:selected").data("iso")||"";try{c=s(r.val(),t.toUpperCase())}catch(e){return t=e.message,n.find(".tooltip_phone_num_error").text(getPhoneErrorMessage(t)),o.push(function(){m("phone_num_error",n),r.addClass("error")}),void setError(r.attr("name"),r.val(),t)}if(!c.isValid)return n.find(".tooltip_phone_num_error").text(phoneErrorInvalidPhone),o.push(function(){m("phone_num_error",n),r.addClass("error")}),setError(r.attr("name"),r.val(),"is not valid"),!0}else{if(""===r.val())return o.push(function(){is_tooltip_message?(m("phone_num_required",n),r.addClass("error")):(r.attr("placeholder",enter_phone_txt),r.addClass("error empty-inp"))}),void setError(r.attr("name"),r.val(),"is empty");if(is_tooltip_message&&h("phone_num_required",n),!a(r.val())&&7<=r.val().length)return o.push(function(){m("phone_num_digits",n),r.addClass("error")}),void setError(r.attr("name"),r.val(),"is long or wrong format");if(!a(r.val())||r.val().length<7)return o.push(function(){m("phone_num",n),r.addClass("error")}),void setError(r.attr("name"),r.val(),"is short or wrong format")}_("phone_num",n)}),n.find("#gdpr-checkbox").each(function(e,t){t=u(t);0==t.is(":checked")&&(t.addClass("error"),o.push(function(){m("gdpr",n)}),setError(t.attr("name"),t.val(),"is not checked"))}),o.length&&customEvents.error(setError()),o}function n(n){var o=[];return n.find("#tooltip_country").hide(),n.find("#country").each(function(e,t){""!==u(t).val()&&(is_tooltip_message&&h("country_required",n),_("country",n))}),n.find(".currency").each(function(e,t){""!==u(t).val()&&(is_tooltip_message&&h("currency",n),_("currency",n))}),n.find(".full_name").each(function(e,t){var r=u(t);""!==r.val()&&(is_tooltip_message&&h("full_name_require",n),r.val().length<2||!b(r.val())?o.push(function(){m("full_name",n),r.addClass("error")}):_("full_name",n))}),n.find(".user_name").each(function(e,t){var r=u(t);""!==r.val()&&(is_tooltip_message&&h("full_name_require",n),y(r.val())?_("user_name",n):o.push(function(){m("user_name",n),r.addClass("error")}))}),n.find(".first_name").each(function(e,t){var r=u(t);""!==r.val()&&(is_tooltip_message&&h("first_name_require",n),r.val().length<2||!l(r.val())?o.push(function(){m("first_name",n),r.addClass("error")}):_("first_name",n))}),n.find(".last_name").each(function(e,t){var r=u(t);""!==r.val()&&(is_tooltip_message&&h("last_name_require",n),r.val().length<2||!l(r.val())?o.push(function(){m("last_name",n),r.addClass("error")}):_("last_name",n))}),n.find(".pw").each(function(e,t){var r=u(t);""!==r.val()&&(is_tooltip_message&&h("pw_required",n),g(r.val())?_("pw",n):o.push(function(){m("pw",n),r.addClass("error");var e=n.find(".pw2");e.attr("disabled","disabled"),e.attr("readonly","readonly")}))}),n.find(".pw2").each(function(e,t){var r=u(t);""!==r.val()&&(is_tooltip_message&&h("pw2_required",n),r.val()===n.find(".pw").val()?_("pw2",n):o.push(function(){m("pw2",n),r.addClass("error")}))}),n.find(".country_prefix").each(function(e,t){var r=u(t);""!==r.val()&&(is_tooltip_message&&h("country_prefix_required",n),i(r.val())?_("country_prefix",n):o.push(function(){m("country_prefix",n),r.addClass("error")}))}),n.find(".user_email").each(function(e,t){var r=u(t);""!==r.val()&&(is_tooltip_message&&h("user_email_required",n),v(r.val())?_("user_email",n):o.push(function(){var e=u(".get_resp_error");0<u(e).length&&u(e).remove(),m("user_email",n),r.addClass("error")}))}),n.find(".phone_num").each(function(e,t){var r=u(t);if(advanced_phone_validation){if(""===r.val())return;if(1===r.val().length)return n.find(".tooltip_phone_num_error").text(phoneErrorTooShort),o.push(function(){m("phone_num_error",n),r.addClass("error")}),!0;t=n.find("#country option:selected").data("iso")||"";try{c=s(r.val(),t.toUpperCase())}catch(e){return t=e.message,n.find(".tooltip_phone_num_error").text(getPhoneErrorMessage(t)),o.push(function(){m("phone_num_error",n),r.addClass("error")}),!0}if(!c.isValid)return n.find(".tooltip_phone_num_error").text(phoneErrorInvalidPhone),o.push(function(){m("phone_num_error",n),r.addClass("error")}),setError(r.attr("name"),r.val(),"is not valid"),!0;n.find(".tooltip_phone_num_error").hide()}else{if(""===r.val())return;if(is_tooltip_message&&h("phone_num_required",n),!a(r.val())&&7<=r.val().length)return o.push(function(){m("phone_num_digits",n),r.addClass("error")}),!0;if(!a(r.val())||r.val().length<7)return o.push(function(){m("phone_num",n),r.addClass("error")}),!0}return _("phone_num",n),!0}),o}var r,E=(r={createLead:!1,createCustomer:!1},{isLocked:function(e){return!!r.hasOwnProperty(e)&&r[e]},lock:function(e){if(!r.hasOwnProperty(e))return!(r[e]=!0);r[e]=!0},unlock:function(e){if(!r.hasOwnProperty(e))return r[e]=!1;r[e]=!1},createLead:function(e,t){t=void 0===t||!!t,E.lock("createLead");e=jQuery.ajax({async:t,type:"POST",url:"api/leads",data:e,timeout:15e3});return e.fail(function(){E.unlock("createLead")}),e},createCustomer:function(e,t){t=void 0===t||!!t,E.lock("createCustomer");e=jQuery.ajax({async:t,type:"POST",url:"api/customers",data:e,timeout:15e3});return e.fail(function(){E.unlock("createCustomer")}),e}});u(function(){setTimeout(function(){u(".ubot").val(0)},2e3),u('select[name="country"]').on("change",function(e){var t=u(this),r=t.closest(".formWrapper").find(".country_prefix"),n=t.find(":selected"),t=n.attr("id"),n=n.data("iso")||"";r.val(t),r.parent().attr("data-iso",n)}).trigger("change");var t=!!navigator.platform&&/iPad|iPhone|iPod/.test(navigator.platform),r=0;t&&u("form .lead-form-submit").on("touchstart",function(){r=u(d).scrollTop()}),u("form .lead-form-submit").on(t?"touchend":"click",function(){if(t){var e=u(d).scrollTop();if(r<e&&30<=e-r||e<r&&30<=r-e)return!1}var o=u(this).closest(".formWrapper"),i=o.find("form");o.find(".helper").remove(),o.find(".required").removeClass("error"),o.find(".empty-inp").removeClass("empty-inp"),o.find(".tooltip_existing").hide(),o.find(".tooltip_first_name").hide(),o.find(".tooltip_last_name").hide(),o.find(".tooltip_full-name-length").hide(),o.find(".tooltip_phone_num_error").hide().stop(!0);var n,a,e=[];if(0<(e=0<o.find(".af-form-wrapper").length?(n=o,a=[],setError("clear"),customEvents.submit({text:n.find('[type="submit"]').text().trim(),type:n.find("#uaction").val()}),n.find(".user_name").each(function(e,t){var r=u(t);return""===r.val()?(a.push(function(){is_tooltip_message?m("full_name_require",n):(r.attr("placeholder",enter_name_txt),r.addClass("error empty-inp"))}),void setError(r.attr("name"),r.val(),"is empty")):(is_tooltip_message&&h("full_name_require",n),r.val().length<2||!y(r.val())?(a.push(function(){m("user_name",n)}),void setError(r.attr("name"),r.val(),"is too short or wrong format")):void _("user_name",n))}),n.find(".user_email").each(function(e,t){var r=u(t);return""===r.val()?(a.push(function(){is_tooltip_message?m("user_email_required",n):(r.attr("placeholder",enter_email_txt),r.addClass("error empty-inp"))}),void setError(r.attr("name"),r.val(),"is empty")):(is_tooltip_message&&h("user_email_required",n),v(r.val())?void _("user_email",n):(a.push(function(){var e=u(".get_resp_error");0<u(e).length&&u(e).remove(),m("user_email",n)}),void setError(r.attr("name"),r.val(),"is too short or wrong format")))}),a.length&&customEvents.error(setError()),a):w(o)).length)return e.forEach(function(e){e()}),!1;e=i.serializeArray()||[];switch((l=e.reduce(function(e,t){return advanced_phone_validation&&"phone_num"===t.name?(e.full_phone=c.number,e[t.name]=c.nationalNumber):("phone_num"===t.name&&(e.full_phone=o.find("#country option:selected").attr("id")+t.value),e[t.name]=t.value),e},{})).uaction){case"create_lead":if(E.isLocked("createLead"))return!1;p();var s=u.Deferred();if(E.isLocked("createLead"))return!1;E.createLead(l).done(function(e){var t=e.meta||{};if(customEvents.success("Lead"),firePixel(e.pixel,e.data[0].email),"function"==typeof fireSuccessLeadCreationPixel&&fireSuccessLeadCreationPixel(),!no_redirect_brand||is_two_step_funnel){if(t.redirectTo)return no_redirect_brand?void I("createLead"):void N.handleRedirect(t.redirectTo);i.append(u("<input>",{type:"hidden",name:"uid",id:"uid",value:e.data[0].id})),s.resolve(e)}else I("createLead")}).fail(function(e){var t,r={},n={};e.responseJSON&&(r=e.responseJSON.meta||{},n=e.responseJSON.errors),n.message&&(t="Server response error message: "+n.message+" (Code: "+n.code+")",d.Sentry&&Sentry.withScope(function(e){e.setUser({email:l.user_email}),Sentry.captureMessage(t,"error")}),customEvents.fail({email:l.user_email,message:n.message,code:n.code,type:"Lead",textButton:i.find('[type="submit"]').text().trim(),errorType:n.type||""})),r.redirectTo?N.handleRedirect(r.redirectTo):(showErrors(e,o),s.reject(e))}),s.done(function(){E.lock("createLead"),i.trigger("submit")}),s.fail(function(){f(),E.unlock("createLead")});break;case"create_user":var l;R(l=u.extend({currency:"USD"},l),o);break;case"update_user":R(l,o);case"redirect_to_form_action":N.handleRedirect(i.attr("action"));break;default:return!0}return!1}),u(".required").blur(function(){n(u(this).closest(".formWrapper")).forEach(function(e){e()})}).change(function(){var e=u(this),t=e.closest(".formWrapper");e.removeClass("empty-inp"),n(t).forEach(function(e){e()}),e.is(":checkbox")&&e.is(":checked")&&(e.removeClass("error"),e.closest(".fieldset").find(".tooltip").hide())}).keydown(function(r){var e=u(this),t=e.closest(".formWrapper"),n=r.which||r.keyCode,o=String.fromCharCode(r.keyCode),i=r.target,a=u(i).attr("id"),s=-1!==[8,9,46,37,39,35,36].indexOf(n);"name"!==r.target.name&&"phone_num"!==r.target.name&&"user_email"!==r.target.name&&"email"!==r.target.name||/\S/.test(r.key)||r.preventDefault(),t.find(["first_name","last_name","user_name","awf_field_name"]).each(function(){return a!==this||(e=o,t=!1,digits=["0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f","g","h","i","`"],u(digits).each(function(){this==e&&(t=!0)}),t&&!s?(r.preventDefault(),!1):void 0);var e,t});i=t.find("input#pw"),n=t.find("input#pw2");return""!==i.val()&&g(i.val())&&(n.removeAttr("disabled","disabled"),n.removeAttr("readonly","readonly")),""===i.val()&&e.is(n)?(is_tooltip_message?m("pw_required",t):(i.attr("placeholder",enter_pw_txt),i.addClass("error"),m("pw2",t)),!1):(t.find(".tooltip_"+e.attr("id")).hide(),t.find(".tooltip_existing").hide(),t.find(".tooltip_country").hide(),t.find(".tooltip_first_name").hide(),t.find(".tooltip_last_name").hide(),t.find(".tooltip_full-name-length").hide(),!0)}).keyup(function(e){var t=u(this),r=t.closest(".formWrapper");t.removeClass("empty-inp");var n=r.find("input#pw"),t=r.find("input#pw2");""!==n.val()&&(g(n.val())&&(t.removeAttr("disabled","disabled"),t.removeAttr("readonly","readonly")),""===t.val()&&r.find(".tooltip_pw2").hide())}).click(function(){var e=u(this).closest(".formWrapper");e.find(".tooltip_phone_num_digits").hide(),e.find(".tooltip_existing").hide(),e.find(".tooltip_pw_invalid").hide(),e.find(".tooltip_country").hide(),e.find(".tooltip_first_name").hide(),e.find(".tooltip_last_name").hide(),e.find(".tooltip_full-name-length").hide()}).focus(function(){var e=u(this),t=e.closest(".formWrapper");t.find(".tooltip_phone_num_digits").hide(),t.find(".tooltip_existing").hide(),t.find(".tooltip_pw_invalid").hide(),t.find(".tooltip_country").hide(),t.find(".tooltip_first_name").hide(),t.find(".tooltip_last_name").hide(),t.find(".tooltip_full-name-length").hide(),"phone_num"===e.attr("id")&&t.find(".tooltip_country").hide()})});var o=d.matchMedia("only screen and (max-width: 1024px)"),C=u("#country_prefix, #phone_num"),x=u("#first_name, #last_name"),$=/[|&;$%#!*?"~\\\/<>()^№:@._=\[\]{}+,0-9]/;o.matches||(x.on("keydown",function(e){var t=(this.value.match(/\s/g)||[]).length;($.test(e.key)||1<=t&&/\s/g.test(e.key))&&e.preventDefault()}),u("#full_name").on("keydown",function(e){(this.value.match(/\s/g)||[]).length;$.test(e.key)&&e.preventDefault()})),o.matches&&(x.on("keyup",function(e){var t=this.value,r=(this.value.match(/\s/g)||[]).length;($.test(t.charAt(t.length-1))||2<=r)&&(this.value=t.substring(0,t.length-1))}),C.on("keyup",function(e){var t=this.value;"U+0008"!==e.key&&(/\d/.test(t.charAt(t.length-1))||(0===this.value?this.value="":this.value=this.value.substring(0,this.value.length-1)))})),u(".lead-form").on("submit",function(){if(0<w(u(this).closest(".formWrapper")).length)return!1});var O,S,k,T,L,P,A,N={handleRedirect:function(e){O=e,u("#download-book").length?(f(),u(t).trigger("showDownloadBookPopup")):this.goToBrand()},goToBrand:function(){O&&(d.location.href=O)}};function R(n,o){var i,a;E.isLocked("createCustomer")||(p(),i=u("#formfull_login"),a=u.Deferred(),E.isLocked("createCustomer")||(E.createCustomer(n).done(function(e){var t=e.data[0],r=e.meta||{};customEvents.success("Customer"),firePixel(e.pixel,t.email),no_redirect_brand?I("createCustomer"):r.redirectTo?d.location.href=r.redirectTo:a.resolve({email:t.email,password:n.pw})}).fail(function(e){showErrors(e,o);var t,r={};(r=e.responseJSON?e.responseJSON.errors:r).message&&(t="Server response error message: "+r.message+" (Code: "+r.code+")",d.Sentry&&Sentry.withScope(function(e){e.setUser({email:n.user_email}),Sentry.captureMessage(t,"error")}),customEvents.fail({email:n.user_email,message:r.message,code:r.code,type:"Customer",textButton:i.find('[type="submit"]').text().trim(),errorType:r.type||""})),a.reject()}),a.done(function(e){E.lock("createCustomer"),i.find("#e").val(e.email),i.find("#p").val(e.password),i.trigger("submit")}),a.fail(function(){f()})))}function I(e){f(),u(t).trigger("showNoRedirectPopup"),E.unlock(e)}u(t).on("downloadBookPopupClosed",function(e){N.goToBrand()}),"undefined"!=typeof is_social_auth&&!0===is_social_auth&&(S=function(e){console.log(e),"connected"===e.status&&k()},k=function(){FB.api("/me?fields=name,email",{fields:"name, email"},function(e){T(e.name,e.email),L()})},T=function(r,n){var e=_slicedToArray(r.split(" "),2),o=e[0],i=e[1];u(".first_name").each(function(e,t){t.value=o}),u(".last_name").each(function(e,t){t.value=i}),u(".full_name").each(function(e,t){t.value=r}),u(".user_email").each(function(e,t){t.value=n})},L=function(){u(".js-auth-popup").addClass("is-open")},P=t.querySelector(".js-google-auth"),A=t.querySelector(".js-fb-auth"),gapi.load("auth2",function(){gapi.auth2.init({client_id:"985416550079-jqvoalsu6m88e955guotbp9mqerou6fk.apps.googleusercontent.com",cookiepolicy:"single_host_origin"}).attachClickHandler(P,{},function(e){var t=e.getBasicProfile(),e=t.getName(),t=t.getEmail();T(e,t),L()},function(e){console.log(JSON.stringify(e,void 0,2))})}),d.fbAsyncInit=function(){FB.init({appId:"125945639420311",cookie:!0,xfbml:!0,version:"v9.0"}),FB.getLoginStatus(function(e){S(e)})},t.addEventListener("DOMContentLoaded",function(e){A.addEventListener("click",function(){FB.login(function(e){e.authResponse?k():console.log("User cancelled login or did not fully authorize.")},{scope:"email, public_profile"})})}),u(".js-close-auth-popup").on("click",function(e){u(e.target).closest(".js-auth-popup").removeClass("is-open")})),t.body.addEventListener("input",function(e){e=e.target;e.classList.contains("phone_num")&&e.closest(".formWrapper")&&(e.value=e.value.replace(/\D/g,""))})}(jQuery,window,document);var fields=["name","email","user_email","first_name","full_name","last_name","country_prefix","phone_num","country","uid","uaction"];function saveField(e,t){void 0!==t&&0<t.length&&hasStorage&&localStorage.setItem(e,t)}function loadField(e,t,r){null!=t&&0<t.length&&(r.val(t),"country"===e&&(r.find('option[value="'.concat(t,'"]')).length||r.val(r.find("option:eq(1)").attr("value")),t=r.find("option:selected").data("iso")||"",r.closest(".formWrapper").find(".fieldset.fl").attr("data-iso",t)))}function setCookie(e,t,r){var n=document.domain;n="."+(n=n.replace(/^[^.]+\./g,""));var o=new Date;o.setTime(o.getTime()+24*r*60*60*1e3);o="expires="+o.toUTCString();document.cookie=e+"="+t+"; "+o+";domain="+n+";path=/"}function isUserID(e){return!isNaN(e)&&0<e}function saveFullNameField(e){e=e||"";var t=$(e+' [name="first_name"]'),e=$(e+' [name="last_name"]');t.val()&&e.val()&&saveField("full_name",t.val()+" "+e.val())}function doWithFields(e,i){e.length&&e.forEach(function(e){var t,r=$("[name="+e+"]");if(r.length&&("pw"===(e="user_name"===e||"user_email"===e?"email":e)&&(e="password"),"save"===i&&(t=(o=r.val().trim())?o.indexOf(" "):-1,("name"===e&&0<=t||"full_name"===e&&0<=t)&&(saveField("first_name",o.substr(0,t)),saveField("last_name",o.substr(t+1))),"name"===e&&-1===t&&saveField("first_name",o),saveField(e,o)),"load"===i)){if("uid"===e){var n=!0,o=localStorage.getItem(e);if(isNaN(o)||!(0<o))return void(n=!1)}else if("uaction"===e&&!n)return;loadField(e,hasStorage?localStorage.getItem(e):"",r)}}),saveFullNameField()}function doWithFieldsperID(e,t,i){var a="#"+e;t.length&&t.forEach(function(e){var t,r=$(a+" [name="+e+"]");if(r.length&&("pw"===(e="user_name"===e||"user_email"===e?"email":e)&&(e="password"),"save"===i&&(o=r.val().trim(),t=(o="country_prefix"===e?$(a).find("#country_prefix option:selected").val()||$(a).find("#country option:selected").attr("id"):o)?o.indexOf(" "):-1,("name"===e&&0<=t||"full_name"===e&&0<=t)&&(saveField("first_name",o.substr(0,t)),saveField("last_name",o.substr(t+1))),"name"===e&&-1===t&&saveField("first_name",o),saveField(e,o)),"load"===i)){if("uid"===e){var n=!0,o=localStorage.getItem(e);if(isNaN(o)||!(0<o))return void(n=!1)}else if("uaction"===e&&!n)return;loadField(e,hasStorage?localStorage.getItem(e):"",r)}}),saveFullNameField(a)}var hasStorage=function(){try{return localStorage.setItem("mod","mod"),localStorage.removeItem("mod"),!0}catch(e){return!1}}();$(function(){doWithFields(fields,"load"),$(".submit, .lead-form-submit, .signup-form-submit, [type=submit]").bind("click",function(){doWithFieldsperID($(this).parents(".formWrapper").attr("id"),fields,"save")}),addEventListener("DOMContentLoaded",function(){var e;$('[name="lead_form"]')&&$('[name="lead_form"]').length&&((e=$('[name="lead_form"]').val().split(" ").join(""))&&0<e.length&&(document.cookie=document.cookie="lpslug="+e+"; path=/; expires=3600"))})}),$(document).ready(function(){$(".popup-exit .get_responder_integrated_form").submit(function(e){var t=$(this).attr("id"),o=$("#"+t);return o.find('input[type="submit"]').attr("disabled",!0),$.ajax({type:"POST",data:$(this).serialize(),url:"api/responder",success:function(e,t,r){var n=e.data[0].message;o.find('input[type="submit"]').removeAttr("disabled");e=$(".get_resp_error");if(-1!==n.indexOf("get_response_integrated_form"))return console.log(n),0<e.length&&e.remove(),$("#"+n+" .error_get_response").append('<div class="get_resp_error"  style=" color:#dd1c1c; display: block;">'+response_message+"</div>"),void $("#"+n+" .get_resp_error").show();0<e.length&&e.remove(),setTimeout(function(){if($("body").hasClass("funnel-one-step"))return doWithFields(fields,"load"),void o.trigger("close-responder-form");if(0===n.indexOf("http")){var e=o.find('input[name="name"]').val().trim(),t="",r="";-1===e.indexOf(" ")?t=e:(t=e.substr(0,e.indexOf(" ")),r=e.substr(e.indexOf(" ")+1));e=o.find('input[name="email"]').val(),e=$('<form method="POST" action="'+n+'"><input type="hidden" name="first_name" value="'+t+'" /><input type="hidden" name="last_name" value="'+r+'" /><input type="hidden" name="user_email" value="'+e+'" /></form>');return $("body").append(e),void e.submit()}window.location.href=n},500)}}),e.preventDefault(),!1}),$("#onExitModal .get_responder_integrated_form").submit(function(e){var t=$(this).attr("id"),o=$("#"+t);return o.find('input[type="submit"]').attr("disabled",!0),$.ajax({type:"POST",data:$(this).serialize(),url:"api/responder",success:function(e,t,r){var n=e.data[0].message;o.find('input[type="submit"]').removeAttr("disabled");e=$(".get_resp_error");if(-1!==n.indexOf("get_response_integrated_form"))return console.log(n),0<e.length&&e.remove(),$("#"+n+" .error_get_response").append('<div class="get_resp_error"  style=" color:#dd1c1c; display: block;">'+response_message+"</div>"),void $("#"+n+" .get_resp_error").show();0<e.length&&e.remove(),setTimeout(function(){if($("body").hasClass("funnel-one-step"))return doWithFields(fields,"load"),void o.trigger("close-responder-form");if(0===n.indexOf("http")){var e=o.find('input[name="name"]').val().trim(),t="",r="";-1===e.indexOf(" ")?t=e:(t=e.substr(0,e.indexOf(" ")),r=e.substr(e.indexOf(" ")+1));e=o.find('input[name="email"]').val(),e=$('<form method="POST" action="'+n+'"><input type="hidden" name="first_name" value="'+t+'" /><input type="hidden" name="last_name" value="'+r+'" /><input type="hidden" name="user_email" value="'+e+'" /></form>');return $("body").append(e),void e.submit()}window.location.href=n},500)}}),e.preventDefault(),!1}),$("#formWrapper-ff-template .get_responder_integrated_form").submit(function(e){var t=$(this).attr("id"),o=$("#"+t);return o.find('input[type="submit"]').attr("disabled",!0),$.ajax({type:"POST",data:$(this).serialize(),url:"api/responder",success:function(e,t,r){var n=e.data[0].message;o.find('input[type="submit"]').removeAttr("disabled");e=$(".get_resp_error");if(-1!==n.indexOf("get_response_integrated_form"))return console.log(n),0<e.length&&e.remove(),$("#"+n+" .error_get_response").append('<div class="get_resp_error"  style=" color:#dd1c1c; display: block;">'+response_message+"</div>"),void $("#"+n+" .get_resp_error").show();0<e.length&&e.remove(),setTimeout(function(){if($("body").hasClass("funnel-one-step"))return doWithFields(fields,"load"),void o.trigger("close-responder-form");if(0===n.indexOf("http")){var e=o.find('input[name="name"]').val().trim(),t="",r="";-1===e.indexOf(" ")?t=e:(t=e.substr(0,e.indexOf(" ")),r=e.substr(e.indexOf(" ")+1));e=o.find('input[name="email"]').val(),e=$('<form method="POST" action="'+n+'"><input type="hidden" name="first_name" value="'+t+'" /><input type="hidden" name="last_name" value="'+r+'" /><input type="hidden" name="user_email" value="'+e+'" /></form>');return $("body").append(e),void e.submit()}window.location.href=n},500)}}),e.preventDefault(),!1}),$("#formWrapper-ff .get_responder_integrated_form").submit(function(e){var t=$(this).attr("id"),o=$("#"+t);return o.find('input[type="submit"]').attr("disabled",!0),$.ajax({type:"POST",data:$(this).serialize(),url:"api/responder",success:function(e,t,r){var n=e.data[0].message;o.find('input[type="submit"]').removeAttr("disabled");e=$(".get_resp_error");if(-1!==n.indexOf("get_response_integrated_form"))return console.log(n),0<e.length&&e.remove(),$("#"+n+" .error_get_response").append('<div class="get_resp_error"  style=" color:#dd1c1c; display: block;">'+response_message+"</div>"),void $("#"+n+" .get_resp_error").show();0<e.length&&e.remove(),setTimeout(function(){doWithFields(fields,"load"),o.trigger("close-responder-form")},500)}}),e.preventDefault(),!1});var o=!1;$(".smar_resp_integrated_form").submit(function(e){return srForm=$(this),$.ajax({type:"POST",data:$(this).serialize(),url:"api/responder",success:function(e,t,r){var n=e.data[0].message;-1!=n.indexOf("smar_resp_integrated")?($("#tooltip_response").remove(),srForm.hasClass("sv-gen-2")&&!o?($("#"+n+" .response_fieldset2").append('<div class="tooltip tooltip_response tooltip_response2" id="tooltip_response2" style="display: block;">'+response_message+"</div>"),$("#"+n+" .response_fieldset2").show(),o=!0):o||($("#"+n+" .response_fieldset").append('<div class="tooltip tooltip_response " id="tooltip_response" style="display: block;">'+response_message+"</div>"),$("#"+n+" .response_fieldset").show(),o=!0),$(document).click(function(){$("#"+n+" .response_fieldset").hide(),$("#"+n+" .response_fieldset2 .tooltip_response2").remove(),$("#"+n+" .response_fieldset2").hide(),o=!1})):window.location.href=n}}),e.preventDefault(),!1})}),window.onload=function(){var e=(new Date).getTimezoneOffset()/60;0<(e=0!=e?-e:e)&&(e="+"+e),setCookie("users_time_zone",encodeURIComponent(e),1)},function(n){n.fn.detachTemp=function(){return this.data("dt_placeholder",n('<span style="display: none;" />').insertAfter(this)),this.detach()},n.fn.detachTo=function(e){return n(e).length?this.data("dt_placeholder",n('<span style="display: none;" />').insertAfter(e)):this.data("dt_placeholder",n('<span style="display: none;" />').insertAfter(this)),this.detach()},n.fn.reattach=function(){return this.data("dt_placeholder")?(this.first().insertBefore(this.data("dt_placeholder")),this.data("dt_placeholder").remove(),this.removeData("dt_placeholder")):window.console&&console.error&&console.error("Unable to reattach this element because its placeholder is not available."),this},n.fn.showTooltip=function(){console.log("showTooltip"),n(this).addClass("sv-hover");var e=n(this).find(".tooltip-popup"),t=e.outerHeight(),r=n(this).parent(".fieldset").find("input").outerHeight();e.css("top","-"+(t/2-r/2)+"px")},n.fn.hideTooltip=function(){console.log("hideTooltip"),n(this).removeClass("sv-hover")},n.fn.toggleTooltip=function(){console.log("toggleTooltip"),n(this).hasClass("sv-hover")?n(this).hideTooltip():n(this).showTooltip()}}($),$(document).ready(function(){var t;$(".formWrapper .sv-skin").length&&($('.sv-skin [id="username"]').parent().hide(),$(".sv-skin input#pw2").removeClass("pw"),$("form.sv-skin").addClass("form-"+ActiveLang),$(".password_eye-icon").length&&$(".password_eye-icon").on("click",function(){var e=$(this).parent().find("input");"password"==e.attr("type")?(e.attr("type","text"),$(this).addClass("password_eye-icon--block")):(e.attr("type","password"),$(this).removeClass("password_eye-icon--block"))}),$('.sv-skin div[id^="terms"]').wrap('<div class="fieldset" id="terms-fieldset"></div>'),$(".sv-skin .custom-checkbox").click(function(){$(this).toggleClass("checked"),$(this).parent().siblings("#tooltip_terms").hide("slow")}),t=!1,$(".tooltip-popup-icon").on("touchstart",function(){t=!0,$(".tooltip-popup-icon").not(this).parent().hideTooltip(),$(this).parent().toggleTooltip()}),$(".tooltip-popup-wrap").mouseover(function(){var e;t||($(this).showTooltip(),e=Date.now(),$(this).attr("id","tooltip-popup-wrap-"+e))}),$(".tooltip-popup-wrap").mouseout(function(){$(this).hideTooltip()}),"undefined"!=typeof termsURL&&($(".sv-skin #terms a").attr("href",termsURL),$(".sv-skin #terms a").attr("target","_blank")),$("input#uid").length&&$("input#uaction").length&&isUserID($("input#uid").val())&&$("input#uaction").val("apr_update_user"),$("body.has-floating-form").on("ffopen",function(){var e=$("#formWrapper-ff").height();e+=46,$("body.has-floating-form").css("padding-bottom",e+"px")}),$("body.has-floating-form").on("ffclosed",function(){$("body.has-floating-form").css("padding-bottom","0")}));var e=document.getElementById("country"),r=document.getElementById("currency"),n=["Brazil","Mexico","Colombia","Argentina","Peru","Venezuela","Chile","Ecuador","Guatemala","Cuba","Haiti","Bolivia","Dominican Republic","Honduras","Paraguay","Nicaragua","El Salvador","Costa Rica","Panama","Puerto Rico","Uruguay"];function o(e,t){e=t||e.target,e=e.options[e.selectedIndex].text;-1!==n.indexOf(e)?r.querySelector('option[value="USD"]').selected=!0:r.querySelector('option[value="EUR"]').selected=!0}e&&null!==e&&r&&null!==r&&(e.addEventListener("change",o),e.addEventListener("DOMContentLoaded",o),o(null,e))}),Array.prototype.find||Array.prototype.find||Object.defineProperty(Array.prototype,"find",{value:function(e){if(null==this)throw TypeError('"this" is null or not defined');var t=Object(this),r=t.length>>>0;if("function"!=typeof e)throw TypeError("predicate must be a function");for(var n=arguments[1],o=0;o<r;){var i=t[o];if(e.call(n,i,o,t))return i;o++}},configurable:!0,writable:!0}),function(){function t(e){var t,i=e.querySelector(".iti__flag"),a=e.querySelector(".iti__selected-flag"),s=e.querySelector(".iti__country-list "),r=e.querySelectorAll('[name="country"] option'),l=[].slice.call(r),u=e.querySelector(".iti__selected-dial-code"),d=e.querySelector(".js-country-code"),n=e.querySelector(".iti__country-filter-input");function o(e){e.target.closest(".iti__country-list")||(s.classList.add("iti__hide"),s.removeEventListener("click",c),document.documentElement.classList.remove("is-opened"),p())}hasStorage&&(r=localStorage.getItem("country_prefix"),t=localStorage.getItem("country"),r&&t&&(e=l.find(function(e){return e.value===t}),u.textContent="+"+(e?r:l[1].id),i.classList.remove(i.classList[1]),i.classList.add("iti__"+(e?e.dataset.iso:l[1].getAttribute("data-iso"))),d.value=e?r:l[1].value));var c=function e(t){var r=t.target.closest("li");if(!r)return!1;var n=r.querySelector(".iti__country-name").textContent,t=r.getAttribute("data-dial-code"),o=r.getAttribute("data-country-code");a.title=n+": +"+t,i.classList.remove(i.classList[1]),i.classList.add("iti__"+o),u.textContent="+"+t,l.find(function(e){return e.dataset.iso===o}).selected=!0,d.value=t,s.classList.add("iti__hide"),s.removeEventListener("click",e),document.documentElement.classList.remove("is-opened"),p()},p=function(){n.value="",n.dispatchEvent(new CustomEvent("input"))};a.addEventListener("click",function(e){var t=s.classList.contains("iti__hide");e.stopPropagation(),t?(s.classList.remove("iti__hide"),s.addEventListener("click",c),document.addEventListener("click",o),document.documentElement.classList.add("is-opened"),n.focus()):(s.classList.add("iti__hide"),s.removeEventListener("click",c),document.removeEventListener("click",o),document.documentElement.classList.remove("is-opened"),p())})}var e=document.querySelectorAll(".iti");window.addEventListener("load",function(){e&&e.length&&e.forEach(function(e){e.closest(".formWrapper")&&t(e.closest(".formWrapper"))})});var r=document.querySelectorAll(".iti__country-filter-input");0<r.length&&r.forEach(function(e){var t,r;t=(e=e).closest(".formWrapper").querySelectorAll(".iti__country"),r=null,e.addEventListener("input",function(e){clearTimeout(r),r=setTimeout(function(){var r,n=e.target.value.toLowerCase(),o=!1;isNaN(n)&&0!==n.indexOf("+")?r="country-name":(r="dial-code",o=!0),t.forEach(function(e){var t=e.querySelector(".iti__"+r).textContent.trim().toLowerCase();0===t.indexOf(n)||o&&1===t.indexOf(n)?e.style.display="block":e.style.display="none"})},300)})})}(),function(){function r(e,t,r){this.emailNode=e,this.datalistId="email-options-"+t,this.domains=r||["gmail.com","outlook.com","yahoo.com","iCloud.com"],this.init()}r.prototype.init=function(){this.addElements(),this.bindEvents()},r.prototype.addElements=function(){this.datalist=document.createElement("datalist"),this.datalist.setAttribute("id",this.datalistId),this.emailNode.insertAdjacentElement("afterend",this.datalist),this.emailNode.setAttribute("list",this.datalistId),this.emailNode.setAttribute("autocomplete","off")},r.prototype.bindEvents=function(){this.emailNode.addEventListener("keyup",this.testValue.bind(this))},r.prototype.testValue=function(e){var t=e.target.value,e=e.keyCode;if(-1!==[37,38,39,40].indexOf(e))return!1;e=t.split("@")[1];if(-1!==this.domains.indexOf(e))return this.emptyDatalist(),!1;-1!==t.indexOf("@")?(t=t.split("@")[0],this.addDatalist(t)):this.emptyDatalist(),this.isSafari()&&this.safariRerender(t)},r.prototype.isSafari=function(){return/^((?!chrome|android).)*safari/i.test(navigator.userAgent)},r.prototype.safariRerender=function(e,t){var r=this.emailNode.value;this.emailNode.value="",this.emailNode.value=r},r.prototype.addDatalist=function(e){for(var t="",r=0;r<this.domains.length;r++)t+="<option value='"+e+"@"+this.domains[r]+"'>";this.datalist.innerHTML=t},r.prototype.emptyDatalist=function(){for(;this.datalist.firstChild;)this.datalist.removeChild(this.datalist.firstChild)};var e=document.querySelectorAll('[name="user_email"]');0<e.length&&Array.prototype.slice.call(e).forEach(function(e,t){new r(e,t)})}();